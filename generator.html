
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–†–µ–¥–∞–∫—Ç–æ—Ä —Å–∞–π—Ç–∞ –ö–∏—Ä–∏–ª–ª–∞ –†—É–∫–æ–≤–∞</title>
  <style>
    html {
  box-sizing: border-box;
}
*, *:before, *:after {
  box-sizing: inherit;
}
body {
  padding: 0;
  margin: 0;
}

    .wrapper {
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
    }
    

.wrapper textarea,
.wrapper input,
.wrapper button {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  display: block;
  margin-top: 10px;
  margin-bottom: 20px;
  padding: 10px;
  font-size: 14px;
}


    .slider-block {
      margin-bottom: 20px;
    }
    .output {
      white-space: pre-wrap;
      background: #f9f9f9;
      border: 1px solid #ccc;
      padding: 15px;
      font-family: monospace;
    }
  </style>
</head>
<body>
<div class="wrapper">

<h1>–ü—Ä–æ—Å—Ç–µ–π—à–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–∞–π—Ç–∞-—Å–µ—Ç–∫–∏,<br>–≤–µ—Ä—Å–∏—è 1.0 üí´üå∫üå∏</h1>

<h2>1. –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</h2>
<input type="text" id="imgUrl" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
<input type="text" id="title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
<textarea id="desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
<input type="text" id="link" placeholder="–°—Å—ã–ª–∫–∞">

<h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è</h3>
<label>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ ¬´–ê–∫—Ü–µ–Ω—Ç¬ª (–∑–æ–ª–æ—Ç–æ–π):</label>
<input type="text" id="noteAccentText" placeholder="–¢–µ–∫—Å—Ç –ø—Ä–∏–º–µ—á–∞–Ω–∏—è">
<input type="text" id="noteAccentLink" placeholder="–°—Å—ã–ª–∫–∞">

<label>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ ¬´–ö–æ–ø–∏—è¬ª (—á—ë—Ä–Ω—ã–π):</label>
<input type="text" id="noteCopyText" placeholder="–¢–µ–∫—Å—Ç –ø—Ä–∏–º–µ—á–∞–Ω–∏—è">
<input type="text" id="noteCopyLink" placeholder="–°—Å—ã–ª–∫–∞">

<label>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ ¬´–ü–æ–¥–∫–∞—Å—Ç¬ª (—Ä–æ–∑–æ–≤—ã–π):</label>
<input type="text" id="notePodcastText" placeholder="–¢–µ–∫—Å—Ç –ø—Ä–∏–º–µ—á–∞–Ω–∏—è">
<input type="text" id="notePodcastLink" placeholder="–°—Å—ã–ª–∫–∞">

<button onclick="addCard()">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>

<h2>2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –≤ ¬´–∫—Ä—ã—à–µ¬ª</h2>
<textarea id="intro" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –∫—Ä—ã—à–∏ —Å–∞–π—Ç–∞..."></textarea>

<h2>–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å–∞–π—Ç–∞ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h2>
<textarea id="existingHTML" rows="10" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–µ–∫—É—â–∏–π HTML-–∫–æ–¥ –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞..."></textarea>

<button onclick="generateSite()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∞–π—Ç</button>
<button onclick="downloadHTML()">–°–∫–∞—á–∞—Ç—å HTML-—Ñ–∞–π–ª</button>
<button onclick="previewSite()">–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>

<h2>–¢—É—Ç –ø–æ—è–≤–∏—Ç—Å—è html-–∫–æ–¥ —Å–∞–π—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç–µ</h2>
<div class="output" id="output"></div>
<h2>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–∞–π—Ç–∞ (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ –≤—ã—à–µ)</h2>
<iframe id="previewFrame" style="width: 100%; height: 600px; border: 1px solid #ccc;"></iframe>

<script>
  let cards = [];

  function normalizeUrl(url) {
    if (!url) return '';
    if (!/^https?:\/\//i.test(url)) {
      return 'https://' + url;
    }
    return url;
  }

  function addCard() {
    const image = document.getElementById('imgUrl').value;
    const title = document.getElementById('title').value;
    const desc = document.getElementById('desc').value;
    let link = normalizeUrl(document.getElementById('link').value);

    let noteAccent = document.getElementById('noteAccentText').value;
    let noteAccentLink = normalizeUrl(document.getElementById('noteAccentLink').value);

    let noteCopy = document.getElementById('noteCopyText').value;
    let noteCopyLink = normalizeUrl(document.getElementById('noteCopyLink').value);

    let notePodcast = document.getElementById('notePodcastText').value;
    let notePodcastLink = normalizeUrl(document.getElementById('notePodcastLink').value);

    let notesHTML = '';
    if (noteAccent) notesHTML += ' <a href="' + noteAccentLink + '" style="color:#F0BD00">' + noteAccent + '</a>';
    if (noteCopy) notesHTML += ' <a href="' + noteCopyLink + '" style="color:#333">' + noteCopy + '</a>';
    if (notePodcast) notesHTML += ' <a href="' + notePodcastLink + '" style="color:#D600D6">' + notePodcast + '</a>';

    const cardHTML = `
      <div class="grid-item">
        <a href="${link}">
          <img src="${image}" alt="–§–æ—Ä–º–∞—Ç: 2:3 (–Ω–∞–ø—Ä–∏–º–µ—Ä 240x360px)" title="–§–æ—Ä–º–∞—Ç: 2:3 (–Ω–∞–ø—Ä–∏–º–µ—Ä 240√ó360px)" />
        </a>
        <p class="caption"><b><a href="${link}">${title}</a></b> ${desc}${notesHTML}</p>
      </div>`;

    cards.unshift(cardHTML);

    const modal = document.createElement('div');
    modal.style.position = 'fixed';
    modal.style.top = '0';
    modal.style.left = '0';
    modal.style.width = '100%';
    modal.style.height = '100%';
    modal.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
    modal.style.display = 'flex';
    modal.style.alignItems = 'center';
    modal.style.justifyContent = 'center';
    modal.style.zIndex = '9999';

    const box = document.createElement('div');
    box.style.background = 'white';
    box.style.padding = '20px 30px';
    box.style.borderRadius = '8px';
    box.style.textAlign = 'center';
    box.innerHTML = '<p style="margin-bottom:20px;">–ö–∞—Ä—Ç–æ—á–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞. –ù–∞–∂–º–∏—Ç–µ ¬´–•–æ—Ä–æ—à–æ¬ª, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.</p><button id="confirmBtn">–•–æ—Ä–æ—à–æ</button>';

    modal.appendChild(box);
    document.body.appendChild(modal);
    document.getElementById('confirmBtn').onclick = function() {
      document.body.removeChild(modal);
    };

    document.getElementById('imgUrl').value = '';
    document.getElementById('title').value = '';
    document.getElementById('desc').value = '';
    document.getElementById('link').value = '';
    document.getElementById('noteAccentText').value = '';
    document.getElementById('noteAccentLink').value = '';
    document.getElementById('noteCopyText').value = '';
    document.getElementById('noteCopyLink').value = '';
    document.getElementById('notePodcastText').value = '';
    document.getElementById('notePodcastLink').value = '';
  }

  function generateSite() {
    const intro = document.getElementById('intro').value;
            let existingHTML = document.getElementById('existingHTML').value;
    let allCardsHTML = cards.join("\n");

    if (existingHTML.includes('<div class="container">')) {
      allCardsHTML = existingHTML.replace(
        /<div class="container">/,
        `<div class="container">\n${allCardsHTML}`
      );
    } else {
      allCardsHTML = `<div class="container">\n${allCardsHTML}\n</div>`;
    }

    const html = `
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html {
  box-sizing: border-box;
}
*, *:before, *:after {
  box-sizing: inherit;
}
body {
  padding: 0;
  margin: 0;
}

    .wrapper {
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    
      font-family: Arial, sans-serif;
      background-color: white;
      padding: 20px;
      line-height: 1.33;
    }
    .container {
      display: grid;
      max-width: 960px;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    .grid-item img {
      width: 100%;
      aspect-ratio: 2 / 3;
      object-fit: cover;
    }
    .caption {
      font-size: 15px;
      color: #333;
      margin-top: 10px;
      line-height: 1.33;
    }
    .intro-text {
      font-size: 20px;
      line-height: 1.33;
      max-width: 800px;
      margin: 0 auto 20px auto;
    }
    @media screen and (max-width: 900px) {
      .intro-text {
        padding-left: 20px;
        padding-right: 20px;
        max-width: 100%;
      }
      .container {
        grid-template-columns: repeat(2, 1fr);
        grid-gap: 20px;
        max-width: 100%;
        padding: 20px;
      }
    }
    @media screen and (max-width: 405px) {
      .container {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
  </style>
  <title>–ò—Å—Ç–æ—Ä–∏–∏ –ö–∏—Ä–∏–ª–ª–∞ –†—É–∫–æ–≤–∞</title>
</head>
<body>
<div class="wrapper">
  <p class="intro-text">${intro}</p>
  ${allCardsHTML}
</div>
</body>
</html>
    `.trim();

    document.getElementById('output').textContent = html;
  }

  function downloadHTML() {
    generateSite();
    const content = document.getElementById('output').textContent;
    const blob = new Blob([content], { type: 'text/html;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'rukov_site.html';
    a.click();
    URL.revokeObjectURL(url);
  }

  function previewSite() {
    generateSite();
    const content = document.getElementById('output').textContent;
    const blob = new Blob([content], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    document.getElementById('previewFrame').src = url;
  }
</script>

</div>
</body>
</html>
